<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CS Loot ‚Äî –û—Ç–∫—Ä—ã–≤–∞–π –∫–µ–π—Å—ã!</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body {
            background: #0f141e;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            text-align: center;
        }
        h1 { font-size: 26px; margin: 20px 0; color: #00d1ff; text-shadow: 0 0 5px rgba(0, 209, 255, 0.5); }
        .tabs {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        .tab {
            padding: 10px 20px;
            background: #1c2333;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.2s;
        }
        .tab.active {
            background: #00d1ff;
            color: black;
            font-weight: bold;
        }
        .content { display: none; }
        .content.active { display: block; }

        .cases-select {
            display: flex;
            gap: 20px;
            margin: 20px auto;
            justify-content: center;
            flex-wrap: wrap;
        }
        .case-option {
            text-align: center;
            cursor: pointer;
            opacity: 0.7;
            transition: 0.3s;
        }
        .case-option.selected {
            opacity: 1;
            transform: scale(1.1);
            filter: drop-shadow(0 0 10px #00d1ff);
        }
        .case-option img {
            width: 90px;
            height: 90px;
            object-fit: contain;
            margin-bottom: 5px;
        }
        .case-name {
            font-size: 14px;
            font-weight: bold;
        }
        .case-price {
            font-size: 14px;
            color: #ffcc00;
        }

        .case-container {
            width: 220px;
            height: 160px;
            margin: 30px auto;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            filter: drop-shadow(0 0 15px rgba(0, 209, 255, 0.3));
        }
        .case-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: transform 0.3s;
        }
        .case-img:hover { transform: scale(1.05); }

        .result {
            margin: 20px;
            min-height: 120px;
            font-size: 16px;
            color: #00d1ff;
            opacity: 0;
            transition: opacity 0.5s;
        }
        .result.show {
            opacity: 1;
        }
        .skin-img {
            max-width: 90%;
            height: auto;
            border-radius: 8px;
            margin-top: 10px;
            box-shadow: 0 0 15px rgba(0, 209, 255, 0.5);
            border: 2px solid #00d1ff;
        }
        .rarity {
            font-size: 14px;
            font-weight: bold;
            margin-top: 5px;
        }
        .price {
            font-size: 14px;
            color: #aaffaa;
        }

        .inventory {
            margin: 20px auto;
            max-width: 500px;
        }
        .inv-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #1c2333;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 10px;
            transition: 0.2s;
        }
        .inv-item:hover {
            background: #253047;
        }
        .inv-item img {
            width: 60px;
            margin-right: 15px;
        }
        .inv-info {
            text-align: left;
            flex-grow: 1;
        }

        .coins {
            font-size: 18px;
            background: #1c2333;
            padding: 12px 20px;
            border-radius: 10px;
            width: fit-content;
            margin-top: 10px;
            font-weight: bold;
        }
        .btn {
            margin-top: 15px;
            padding: 12px 24px;
            background: #00d1ff;
            color: black;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: 0.2s;
        }
        .btn:hover {
            background: #00a8cc;
            transform: scale(1.05);
        }

        .ref-link {
            margin: 15px 0;
            padding: 12px;
            background: #1c2333;
            border-radius: 8px;
            word-break: break-all;
            font-size: 14px;
            color: #ddd;
        }
    </style>
</head>
<body>
    <h1>üéÅ CS Loot ‚Äî –û—Ç–∫—Ä—ã–≤–∞–π –∫–µ–π—Å—ã!</h1>

    <!-- –í–∫–ª–∞–¥–∫–∏ -->
    <div class="tabs">
        <div class="tab active" onclick="openTab('game')">–ò–≥—Ä–∞—Ç—å</div>
        <div class="tab" onclick="openTab('inventory')">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
        <div class="tab" onclick="openTab('ref')">–†–µ—Ñ–µ—Ä–∞–ª—ã</div>
    </div>

    <!-- –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ -->
    <div id="game" class="content active">
        <div class="cases-select">
            <div class="case-option selected" data-id="basic">
                <img src="https://i.imgur.com/7XbZQYv.png" alt="–ë–∞–∑–æ–≤—ã–π">
                <div class="case-name">–ë–∞–∑–æ–≤—ã–π</div>
                <div class="case-price">50 –º–æ–Ω–µ—Ç</div>
            </div>
            <div class="case-option" data-id="pro">
                <img src="https://i.imgur.com/9uRlKpP.png" alt="–ü—Ä–æ">
                <div class="case-name">–ü—Ä–æ</div>
                <div class="case-price">150 –º–æ–Ω–µ—Ç</div>
            </div>
            <div class="case-option" data-id="elite">
                <img src="https://i.imgur.com/mVwzJxN.png" alt="–≠–ª–∏—Ç–Ω—ã–π">
                <div class="case-name">–≠–ª–∏—Ç–Ω—ã–π</div>
                <div class="case-price">300 –º–æ–Ω–µ—Ç</div>
            </div>
        </div>

        <div class="case-container" id="openCase">
            <img src="https://i.imgur.com/7XbZQYv.png" class="case-img" alt="–ö–µ–π—Å">
        </div>

        <div class="result" id="result">–í—ã–±–µ—Ä–∏ –∫–µ–π—Å –∏ –Ω–∞–∂–º–∏, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å</div>

        <div class="coins">–ú–æ–Ω–µ—Ç—ã: <span id="coins">200</span></div>
        <button class="btn" onclick="dailyReward()">–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ (+20)</button>
    </div>

    <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
    <div id="inventory" class="content">
        <h2>üéí –¢–≤–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
        <div class="inventory" id="inventoryList">
            <!-- –°–∫–∏–Ω—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
        </div>
        <button class="btn" onclick="document.getElementById('inventory').classList.remove('active'); document.getElementById('game').classList.add('active');">–ù–∞–∑–∞–¥</button>
    </div>

    <!-- –†–µ—Ñ–µ—Ä–∞–ª—ã -->
    <div id="ref" class="content">
        <h2>ü§ù –ü—Ä–∏–≤–µ–¥–∏ –¥—Ä—É–≥–∞</h2>
        <p>–ü–æ–¥–µ–ª–∏—Å—å —Å—Å—ã–ª–∫–æ–π ‚Äî –ø–æ–ª—É—á–∏ –Ω–∞–≥—Ä–∞–¥—É –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞</p>
        <div class="ref-link" id="refLink">t.me/CasesBot?start=—Ç–≤–æ–π_–Ω–∏–∫</div>
        <p>–ó–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞: +100 –º–æ–Ω–µ—Ç</p>
        <button class="btn" onclick="copyRefLink()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
        <button class="btn" onclick="document.getElementById('ref').classList.remove('active'); document.getElementById('game').classList.add('active');">–ù–∞–∑–∞–¥</button>
    </div>

    <script>
        let coins = parseInt(localStorage.getItem("csloot_coins")) || 200;
        let inventory = JSON.parse(localStorage.getItem("csloot_inventory")) || [];
        let refId = localStorage.getItem("csloot_ref") || Math.random().toString(36).substr(2, 9);
        let currentCase = "basic";

        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        document.getElementById("coins").textContent = coins;
        updateInventory();
        document.getElementById("refLink").textContent = `t.me/CasesBot?start=${refId}`;

        // –í—ã–±–æ—Ä –∫–µ–π—Å–∞
        document.querySelectorAll(".case-option").forEach(el => {
            el.onclick = function() {
                document.querySelectorAll(".case-option").forEach(x => x.classList.remove("selected"));
                this.classList.add("selected");
                currentCase = this.getAttribute("data-id");
                const img = this.querySelector("img").src;
                document.querySelector(".case-img").src = img;
            };
        });

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–∞
        document.getElementById("openCase").onclick = function() {
            const caseData = {
                basic: { price: 50, winChance: 0.15 },
                pro: { price: 150, winChance: 0.25 },
                elite: { price: 300, winChance: 0.35 }
            };

            const data = caseData[currentCase];
            if (coins < data.price) {
                document.getElementById("result").innerHTML = "‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!";
                showResult();
                return;
            }

            coins -= data.price;
            document.getElementById("coins").textContent = coins;
            localStorage.setItem("csloot_coins", coins);

            const resultDiv = document.getElementById("result");
            resultDiv.innerHTML = '<strong>üåÄ –û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–µ–π—Å...</strong>';
            resultDiv.classList.remove("show");

            document.querySelector(".skin-img")?.remove();

            // –ê–Ω–∏–º–∞—Ü–∏—è
            const caseImg = document.querySelector(".case-img");
            caseImg.style.transform = "scale(0.95)";
            setTimeout(() => caseImg.style.transform = "scale(1)", 200);

            // –ó–≤—É–∫ (—Ä–µ–∞–ª—å–Ω—ã–π –∏–∑ CS2)
            const audio = new Audio("https://cdn.pixabay.com/audio/2022/05/25/audio_4776eb7fa7.mp3"); // "–í—ã–ø–∞–ª –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π"
            audio.volume = 0.5;

            setTimeout(() => {
                const roll = Math.random();
                const skins = getSkinsByCase(currentCase);
                const isWinExpensive = roll < data.winChance;
                let skin;

                if (isWinExpensive) {
                    const expensive = skins.filter(s => s[2] > data.price);
                    skin = expensive.length > 0 
                        ? expensive[Math.floor(Math.random() * expensive.length)] 
                        : skins[Math.floor(Math.random() * skins.length)];
                } else {
                    skin = skins[Math.floor(Math.random() * skins.length)];
                }

                const name = skin[0];
                const img = skin[1];
                const price = skin[2];
                const rarity = skin[3];

                resultDiv.innerHTML = `<strong>üéâ –í—ã–ø–∞–ª–æ: ${name}</strong><br><span class="rarity">${rarity}</span>`;
                const imgEl = document.createElement("img");
                imgEl.src = img;
                imgEl.alt = name;
                imgEl.className = "skin-img";
                resultDiv.appendChild(imgEl);
                resultDiv.insertAdjacentHTML("beforeend", `<div class="price">${price} –º–æ–Ω–µ—Ç</div>`);
                resultDiv.classList.add("show");

                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                inventory.push({ name, img, price, rarity, from: currentCase });
                localStorage.setItem("csloot_inventory", JSON.stringify(inventory));
                updateInventory();

                // –ó–≤—É–∫
                audio.play().catch(e => console.log("–ó–≤—É–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"));
            }, 1500);
        };

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∫–∏–Ω–æ–≤ –ø–æ —Ç–∏–ø—É –∫–µ–π—Å–∞
        function getSkinsByCase(type) {
            const allSkins = [
                ["AK-47 | Neon Rider", "https://i.imgur.com/8Vqk2lD.png", 120, "–®–º–æ—Ç"],
                ["M4A4 | Emperor", "https://i.imgur.com/3pZbN6T.png", 200, "–®–º–æ—Ç"],
                ["AWP | Dragon Lore", "https://i.imgur.com/5uXjC0L.png", 500, "–¢–∞–π–Ω—ã–π"],
                ["Glock-18 | Moonrise", "https://i.imgur.com/mK9e9Yf.png", 80, "–†–µ–¥–∫–∏–π"],
                ["Desert Eagle | Shattered Web", "https://i.imgur.com/1aBcDeF.png", 150, "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π"],
                ["USP-S | Night Lotus", "https://i.imgur.com/5uXjC0L.png", 400, "–¢–∞–π–Ω—ã–π"],
                ["M9 Bayonet | Doppler", "https://i.imgur.com/8Vqk2lD.png", 1000, "–¢–∞–π–Ω—ã–π"],
                ["Nova | Sand Dune", "https://i.imgur.com/3pZbN6T.png", 60, "–û–±—ã—á–Ω—ã–π"],
                ["P250 | Red Rock", "https://i.imgur.com/mK9e9Yf.png", 70, "–†–µ–¥–∫–∏–π"],
                ["MAC-10 | Neon Rider", "https://i.imgur.com/1aBcDeF.png", 90, "–†–µ–¥–∫–∏–π"],
                ["SG 553 | Army Sheen", "https://i.imgur.com/5uXjC0L.png", 50, "–û–±—ã—á–Ω—ã–π"]
            ];

            switch (type) {
                case "basic": return allSkins.filter(s => s[2] <= 200);
                case "pro": return allSkins.filter(s => s[2] >= 100 && s[2] <= 600);
                case "elite": return allSkins.filter(s => s[2] >= 300);
                default: return allSkins;
            }
        }

        function updateInventory() {
            const list = document.getElementById("inventoryList");
            list.innerHTML = inventory.length ? "" : "<p>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</p>";
            inventory.forEach((item, index) => {
                const stars = Math.floor(item.price / 10); // 10 –º–æ–Ω–µ—Ç = 1 Star
                const div = document.createElement("div");
                div.className = "inv-item";
                div.innerHTML = `
                    <img src="${item.img}" alt="${item.name}">
                    <div class="inv-info">
                        <div><strong>${item.name}</strong></div>
                        <div class="rarity">${item.rarity}</div>
                        <div class="price">${item.price} –º–æ–Ω–µ—Ç</div>
                    </div>
                    <button class="btn" onclick="sellSkin(${item.price}, '${item.name}')">–ü—Ä–æ–¥–∞—Ç—å –∑–∞ ${stars} ‚òÖ</button>
                `;
                list.appendChild(div);
            });
        }

        function sellSkin(coinsValue, name) {
            const starsEarned = Math.floor(coinsValue / 10);
            alert(\`üéâ –ü—Ä–æ–¥–∞–Ω–æ: \${name}\n–ü–æ–ª—É—á–µ–Ω–æ: \${starsEarned} Telegram Stars\n(—á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø–ª–∞—Ç—ë–∂ Telegram)\`);

            // –£–¥–∞–ª—è–µ–º —Å–∫–∏–Ω
            inventory = inventory.filter(skin => !(skin.name === name && skin.price === coinsValue));
            localStorage.setItem("csloot_inventory", JSON.stringify(inventory));
            updateInventory();
        }

        function dailyReward() {
            coins += 20;
            document.getElementById("coins").textContent = coins;
            localStorage.setItem("csloot_coins", coins);
            alert("‚úÖ –ü–æ–ª—É—á–µ–Ω–æ +20 –º–æ–Ω–µ—Ç!");
        }

        function copyRefLink() {
            navigator.clipboard.writeText(\`t.me/CasesBot?start=\${refId}\`).then(() => {
                alert("‚úÖ –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!");
            });
        }

        function openTab(tabName) {
            document.querySelectorAll(".content").forEach(el => el.classList.remove("active"));
            document.querySelectorAll(".tab").forEach(el => el.classList.remove("active"));
            document.getElementById(tabName).classList.add("active");
            document.querySelector(\`.tab:nth-child(\${tabName === 'game' ? 1 : tabName === 'inventory' ? 2 : 3})\`).classList.add("active");
        }
    </script>
</body>
</html>
